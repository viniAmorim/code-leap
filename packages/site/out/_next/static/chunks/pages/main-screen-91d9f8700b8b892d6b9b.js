(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[293],{6998:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return q}});var o=n(2322),r=n(2590),i=n(9644),s=n.n(i),l=n(2784),c=n(4106),a=n(5998),d=n(9767),u=n(7243),p=n(5632),h=n(950),f=n(4076),m=n(8978),g=n(7513),x=n(917),y=x.ZP.div.withConfig({displayName:"styles__Content",componentId:"sc-il5yst-0"})(["background:",";height:100%;"],(function(e){return e.theme.colors["gray-500"]})),b=x.ZP.div.withConfig({displayName:"styles__Container",componentId:"sc-il5yst-1"})(["padding-top:32px;"]),v=function(e){var t=e.children,n=(0,a.I0)(),r=(0,p.useRouter)();return(0,o.jsxs)(y,{children:[(0,o.jsx)(g.wp,{children:(0,o.jsx)(g.zx,{variant:"ghost",onClick:function(){n({type:"logout"}),r.push("/")},children:"Logout"})}),(0,o.jsx)(b,{children:t})]})},j=((0,x.ZP)(h.X2).withConfig({displayName:"styles__StyledRow",componentId:"sc-14l31er-0"})(["background:",";border:1px solid ",";border-radius:4px;padding:16px;"],(function(e){return e.theme.colors.white}),(function(e){return e.theme.colors["gray-400"]})),(0,x.ZP)(g.X6).withConfig({displayName:"styles__StyledHeading",componentId:"sc-14l31er-1"})(["font-family:'Roboto';font-style:normal;font-weight:700;font-size:22px;line-height:26px;margin-left:24px;margin-bottom:24px;color:",";"],(function(e){return e.theme.colors.black}))),_=(x.ZP.p.withConfig({displayName:"styles__Paragraph",componentId:"sc-14l31er-2"})(["",";margin-top:8px;"],(function(e){return e.theme.typography["body-default"]})),x.ZP.label.withConfig({displayName:"styles__Label",componentId:"sc-14l31er-3"})(["color:",";",";"],(function(e){return e.theme.colors["blue-100"]}),(function(e){return e.theme.typography["body-heavy"]})),(0,x.ZP)(h.X2).withConfig({displayName:"styles__ContentRow",componentId:"sc-14l31er-4"})(["margin-top:16px;"]),x.ZP.div.withConfig({displayName:"styles__ButtonContainer",componentId:"sc-14l31er-5"})(["display:flex;justify-content:right;padding-right:24px;margin-top:16px;width:100%;"])),w=(0,x.ZP)(g.zx).withConfig({displayName:"styles__CancelButton",componentId:"sc-14l31er-6"})(["box-sizing:border-box;margin-right:10px;background:",";border:1px solid ",";color:",";border-radius:8px;&:hover{background-color:",";}"],(function(e){return e.theme.colors.white}),(function(e){return e.theme.colors["gray-300"]}),(function(e){return e.theme.colors.black}),(function(e){return e.theme.colors["gray-500"]})),C=(0,x.ZP)(g.zx).withConfig({displayName:"styles__DeleteButton",componentId:"sc-14l31er-7"})(["background:",";border-radius:8px;border-color:",";&:hover{background-color:",";border-color:",";}"],(function(e){return e.theme.colors.delete}),(function(e){return e.theme.colors.delete}),(function(e){return e.theme.colors.error}),(function(e){return e.theme.colors.delete})),P=(0,x.ZP)(g.zx).withConfig({displayName:"styles__SaveButton",componentId:"sc-14l31er-8"})(["background:",";border-radius:8px;border-color:",";&:hover{background-color:",";border-color:",";}"],(function(e){return e.theme.colors.save}),(function(e){return e.theme.colors.save}),(function(e){return e.theme.colors.success}),(function(e){return e.theme.colors.success})),I=x.ZP.div.withConfig({displayName:"styles__PostCard",componentId:"sc-14l31er-9"})(["display:flex;flex-direction:column;padding:0px;margin-top:24px;border:1px solid #e5e5e5;border-radius:16px;"]),N=x.ZP.div.withConfig({displayName:"styles__WrapperHead",componentId:"sc-14l31er-10"})(["display:flex;flex-direction:row;align-items:center;justify-content:space-between;padding:20px;background:",";border-radius:16px 16px 0 0;"],(function(e){return e.theme.colors.primary})),Z=(0,x.ZP)(g.X6).withConfig({displayName:"styles__Title",componentId:"sc-14l31er-11"})(["font-family:'Roboto';font-style:normal;font-weight:700;font-size:22px;line-height:26px;padding-left:10px;margin:10px 10px 10px 24px;color:",";"],(function(e){return e.theme.colors.white})),k=x.ZP.div.withConfig({displayName:"styles__WrapperButtons",componentId:"sc-14l31er-12"})(["align-items:flex-end;"]),S=x.ZP.div.withConfig({displayName:"styles__WrapperCardInfo",componentId:"sc-14l31er-13"})(["display:flex;flex-direction:column;justify-content:space-between;padding:25px;background:#fbfbfb;border:1px solid #dbdddd;box-sizing:border-box;border-radius:0px 0px 4px 4px;"]),O=x.ZP.div.withConfig({displayName:"styles__Info",componentId:"sc-14l31er-14"})(["display:flex;flex-direction:row;justify-content:space-between;"]),E=(0,x.ZP)(g.X6).withConfig({displayName:"styles__Username",componentId:"sc-14l31er-15"})(["margin-left:24px;font-family:'Roboto';font-style:normal;font-weight:700;font-size:18px;line-height:21px;color:",";"],(function(e){return e.theme.colors["gray-200"]})),D=(0,x.ZP)(g.X6).withConfig({displayName:"styles__HourPost",componentId:"sc-14l31er-16"})(["font-family:'Roboto';font-style:normal;font-weight:400;font-size:18px;line-height:21px;text-align:right;align-items:flex-end;margin-right:24px;color:",";"],(function(e){return e.theme.colors["gray-200"]})),L=x.ZP.div.withConfig({displayName:"styles__Content",componentId:"sc-14l31er-17"})(["font-family:'Roboto';font-style:normal;font-weight:400;font-size:18px;line-height:21px;margin-top:10px;margin-left:24px;color:",";"],(function(e){return e.theme.colors.black})),T=x.ZP.span.withConfig({displayName:"styles__LoadingSpan",componentId:"sc-14l31er-18"})(["margin-bottom:20px;margin-left:-1000px;"]);function z(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function X(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?z(Object(n),!0).forEach((function(t){(0,u.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):z(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var R=function(e){var t,n,r,i,s=e.onSavePost,l=e.onPostDelete,c=e.onPostEdit,d=e.loadMoreData,u=e.hasNextPage,x=e.posts,y=void 0===x?[]:x,b=e.isLoading,z=e.form,R=e.editForm,q=e.modalRef,H=(e.label,(0,p.useRouter)(),(0,a.v9)((function(e){return e.user})));function M(e){var t=new Date,n=new Date("".concat(e)),o=Math.abs(t.getTime()-n.getTime()),r=Math.ceil(o/864e5),i=Math.floor(o/1e3/60/60),s=Math.floor(o/1e3/60);return r<1440?s>60?"".concat(i," hours ago"):"".concat(s," minutes ago"):"".concat(r," day(s) ago")}return console.log(y),(0,o.jsx)(v,{children:(0,o.jsx)(h.W2,{children:(0,o.jsxs)(h.X2,{children:[(0,o.jsx)(h.JX,{sm:12,md:12,children:(0,o.jsxs)(g.Zb,{children:[(0,o.jsx)(j,{size:"title",children:"What's on your mind ?"}),(0,o.jsxs)("form",{onSubmit:z.handleSubmit(s),children:[(0,o.jsx)(g.NI,{label:"Title",error:null===(t=z.formState.errors)||void 0===t||null===(n=t.title)||void 0===n?void 0:n.message,children:(0,o.jsx)(g.II,X({name:"title",placeholder:"Hello World"},z.register("title",{required:!0,minLength:{value:5,message:"Title is required"}})))}),(0,o.jsx)(g.NI,{label:"Content",error:null===(r=z.formState.errors)||void 0===r||null===(i=r.content)||void 0===i?void 0:i.message,children:(0,o.jsx)(g.II,X({name:"content",placeholder:"Content here"},z.register("content",{required:!0,minLength:{value:5,message:"Content is required"}})))}),(0,o.jsx)(_,{children:(0,o.jsx)(g.zx,{isLoading:b,type:"submit",children:"CREATE"})})]})]})}),null===y||void 0===y?void 0:y.map((function(e){var t,n,r,i,s,a;return(0,o.jsx)(h.JX,{sm:12,md:12,children:(0,o.jsxs)(I,{children:[(0,o.jsxs)(N,{children:[(0,o.jsx)(Z,{children:e.title}),(null===H||void 0===H?void 0:H.username)==e.username&&(0,o.jsxs)(k,{children:[(0,o.jsx)(g.u_,{label:(0,o.jsx)(m.Xm5,{}),title:"Are you sure you want to delete this item?",width:600,appElement:"#__next",ref:q,children:(0,o.jsxs)(_,{children:[(0,o.jsx)(w,{isLoading:b,children:"Cancel"}),(0,o.jsx)(C,{isLoading:b,onClick:function(){return l(e.id)},children:"Delete"})]})}),(0,o.jsx)(g.u_,{label:(0,o.jsx)(m.fmQ,{}),title:"Edit item",width:600,appElement:"#__next",ref:q,children:(0,o.jsxs)("form",{onSubmit:null===R||void 0===R?void 0:R.handleSubmit(c),children:[(0,o.jsx)(g.NI,{error:null===R||void 0===R||null===(t=R.formState.errors)||void 0===t||null===(n=t.id)||void 0===n?void 0:n.message,children:(0,o.jsx)(g.II,X({value:e.id,type:"hidden"},null===R||void 0===R?void 0:R.register("id",{required:!0,minLength:{value:5,message:"id is required"}})))}),(0,o.jsx)(g.NI,{label:"Title",error:null===R||void 0===R||null===(r=R.formState.errors)||void 0===r||null===(i=r.title)||void 0===i?void 0:i.message,children:(0,o.jsx)(g.II,X({lable:"Title",placeholder:"Hello world"},null===R||void 0===R?void 0:R.register("title",{required:!0,minLength:{value:5,message:"title is required"}})))}),(0,o.jsx)(g.NI,{label:"Content",error:null===R||void 0===R||null===(s=R.formState.errors)||void 0===s||null===(a=s.content)||void 0===a?void 0:a.message,children:(0,o.jsx)(g.II,X({content:"content",placeholder:"Content here"},null===R||void 0===R?void 0:R.register("content",{required:!0,minLength:{value:5,message:"content is required"}})))}),(0,o.jsxs)(_,{children:[(0,o.jsx)(w,{isLoading:b,children:"Cancel"}),(0,o.jsx)(P,{isLoading:b,type:"submit",children:"Save"})]})]})})]})]}),(0,o.jsxs)(S,{children:[(0,o.jsxs)(O,{children:[(0,o.jsxs)(E,{children:["@",e.username]}),(0,o.jsx)(D,{children:M(e.created_datetime)})]}),(0,o.jsx)(L,{children:e.content})]})]})})})),u&&(0,o.jsx)(h.X2,{justify:"center",children:(0,o.jsx)(f.h,{onEnter:d,children:(0,o.jsx)(T,{children:(0,o.jsx)(m.fCD,{})})})})]})})})};var q=function(e){e.onRefresh;var t=e.label,n=(0,a.v9)((function(e){return e.user})),i=(0,l.useState)([]),u=i[0],p=i[1],h=(0,l.useState)(!0),f=h[0],m=h[1],g=(0,l.useState)(1),x=g[0],y=g[1],b=(0,l.useState)(0),v=b[0],j=b[1],_=(0,d.e1)().addToast,w=(0,c.cI)();(0,l.useEffect)((function(){C()}),[]);var C=function(){if(f)try{var e="https://dev.codeleap.co.uk/careers/?offset=".concat(v);s().get(e).then((function(e){var t=e.data,n=t.results,o=t.count;n&&(o===u.length+n.length&&m(!1),p((function(e){return[].concat((0,r.Z)(e),(0,r.Z)(n))})),y((function(e){return e+1})),j((function(e){return e+10})))}))}catch(t){console.log(t)}},P=function(){w.reset(),_("successfully.",{appearance:"success",autoDismiss:!0})};return(0,o.jsx)(R,{posts:u,onSavePost:function(e){var t,o=e.title,r=e.content;try{fetch("http://dev.codeleap.co.uk/careers/",{method:"post",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({username:null===n||void 0===n?void 0:n.username,title:o,content:r})}).then((function(e){console.log("Post criado"),P()}))}catch(i){console.log(i),t=i,console.log(t),w.setError("title",{type:"manual",message:"An error occurred. Try again."})}},onPostDelete:function(e){fetch("https://dev.codeleap.co.uk/careers/".concat(e,"/"),{method:"DELETE"}).then((function(e){return e.text()})).then((function(e){return _("Post deleted successfully.",{appearance:"success",autoDismiss:!0})}))},onPostEdit:function(e){var t=e.id,n=e.title,o=e.content;fetch("https://dev.codeleap.co.uk/careers/".concat(t,"/"),{method:"PATCH",body:JSON.stringify({title:n,content:o}),headers:{"Content-type":"application/json; charset=UTF-8"}}).then((function(e){e.json(),P()})).then((function(e){return console.log(e)}))},loadMoreData:function(){x>1&&C()},hasNextPage:f,isLoading:!1,form:w,editForm:w,label:t})}},9665:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/main-screen",function(){return n(6998)}])}},function(e){e.O(0,[525,895,580,774,888,179],(function(){return t=9665,e(e.s=t);var t}));var t=e.O();_N_E=t}]);